<div class="modal ng-scope top am-fade-and-slide-top" tabindex="-1" role="dialog" style="display: block;">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			
			<div class="modal-header"><button type="button" class="close" ng-click="$hide()">Ã—</button>
				 <h4 class="modal-title"><span class="glyphicon glyphicon-transfer"></span> Map tree dataset</h4></div>
				<div class="modal-body">
					<div>
						
					<div class="col-md-6">	<input type="text" class="form-control" ng-model="$parent.$parent.mapToTable" ng-model-options="{allowInvalid:true}" ng-options="model as model.name for model in datamodels | orderObjectBy" placeholder="Enter table name" minLength="3" bs-typeahead>
						</div>
						<div class="col-md-3">
							<img ng-if="mapToTable['fields']" ng-src="{{ Icons.datamodel.get(mapToTable['name']) }}" class="specify-icon-24">
						</div>	
						<div class="col-md-3">
							<button type="button" class="btn btn-danger" ng-click="deleteCsvMapping()">Delete mapping</button>
						</div>
					</div>
					<table class="table table-striped">
<thead><tr><th>{{collection.name}}</th><th>{{mapToTable.name}} table field</th><th>Tree rank</th></tr></thead>
<tbody>
				 	<tr ng-hide="key === '_id'" ng-repeat="(key, value) in datasetMapping">
						<td>{{key}}</td>
						
						<td><button type="button" class="btn btn-default" ng-if="datasetMapping[key]['table']" ng-model="datasetMapping[key]['fieldName']"  ng-options="field for field in getFieldsForModel()" placeholder="Choose field" bs-select></td>
				
				
				
				<td><button type="button" class="btn btn-default" ng-if="datasetMapping[key]['fieldName'] === 'Name'" ng-model="datasetMapping[key]['rankName']"  ng-options="treeDefItem.Name as treeDefItem.Name for treeDefItem in getTreeDefItems(datasetMapping[key]['table']['name'])" placeholder="Choose tree rank" bs-select>
				
				</td>
				 		
				 	</tr>
				</tbody>
					
					</table>
			
				<div class="modal-footer"><div class="col-md-6 taxon-footer-txt">
				</div>
					<div class="col-md-6">
					<button type="button" class="btn btn-success" ng-click="$hide(); saveMapping() "> <i class="fa fa-save"></i> Save mapping</button> <button type="button" class="btn btn-danger" ng-click="$hide()"> <i class="fa fa-times"></i> Close</button> 
					</div>
				</div>
			</div>
		</div>
	</div>